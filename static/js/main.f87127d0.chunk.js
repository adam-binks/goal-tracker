(this["webpackJsonpgoal-tracker"]=this["webpackJsonpgoal-tracker"]||[]).push([[0],{30:function(e,t,n){e.exports={node:"Node_node__wg4YW",nodeWrapper:"Node_nodeWrapper__3WY4P",isDragging:"Node_isDragging__1pmeU",nodeLabel:"Node_nodeLabel__3CHoL",valueIcon:"Node_valueIcon__26oPj",emojiPicker:"Node_emojiPicker__2Dhfk",hoverButton:"Node_hoverButton__3PrTT",deleteNodeButton:"Node_deleteNodeButton__3P22n Node_hoverButton__3PrTT",toggleValueButton:"Node_toggleValueButton__-m4rT Node_hoverButton__3PrTT",scaleIn:"Node_scaleIn__2C3Yv"}},37:function(e,t,n){e.exports={treeContainer:"Tree_treeContainer__2IcCD",tree:"Tree_tree__1c-DC",treeElement:"Tree_treeElement__2CvD2",addChildButton:"Tree_addChildButton__YVLj9"}},53:function(e,t,n){e.exports={content:"homepage_content__1x4vi",homepageButtonPrimary:"homepage_homepageButtonPrimary__1QOeU",homepageButtonSecondary:"homepage_homepageButtonSecondary__1ERQz"}},74:function(e,t,n){e.exports={menuDiv:"Menu_menuDiv__jjw-M",select:"Menu_select__2LyGJ"}},85:function(e,t,n){},86:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(40),c=n.n(o),i=(n(85),n(86),n(103)),d=n(77),s=n(15),u=n(47),l=n(22),p=n(6),j=n.n(p),h=n(13),b=n(33),f=n(70),g=n.n(f),v=n(48),m=n.n(v),O=n(71),x=n(38),y=n(34),w=Object(O.a)({apiKey:"AIzaSyDSca3qVBkCgTig3SzrbEvNbxuY0YnMmGQ",authDomain:"goal-tracker-adam-binks.firebaseapp.com",projectId:"goal-tracker-adam-binks",storageBucket:"goal-tracker-adam-binks.appspot.com",messagingSenderId:"143223897365",appId:"1:143223897365:web:aeb3487a60d820c7637d1c",measurementId:"G-43XXBKS2R9"}),_=Object(x.e)(w),k=Object(x.b)(_,"projects");function C(){return(C=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(x.a)(k,{nodes:t.present});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),y.b.error("Error creating project: "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function I(){return(I=Object(h.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==n&&"loading"!==(null===n||void 0===n?void 0:n.present)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(x.f)(Object(x.c)(_,"projects",t),{nodes:n.present});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),y.b.error("Error saving project: "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function N(e){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.c)(_,"projects",t),e.next=3,Object(x.d)(n);case 3:if(!(r=e.sent).exists()){e.next=11;break}if(r.data().nodes){e.next=8;break}return y.b.error("Missing root node on project id ".concat(t)),e.abrupt("return",void 0);case 8:return e.abrupt("return",r.data().nodes);case 11:return y.b.error("Project does not exist with id ".concat(t)),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D="saves",B="autosave",T="last_active_project",S=function(){try{var e=localStorage.getItem(D);if(null===e)return;return JSON.parse(e)}catch(t){return}},V=function(){var e=localStorage.getItem(T);if(e)return e;var t=function(){var e=S();return e?Object.keys(e):[B]}();return t?t[0]:B},E={label:"Root",id:"root",parents:[]},U=function(){return{present:G([E])}},L=function(e,t){return e.find((function(e){return e.id===t}))},R=function(e,t,n,r){var a=L(e,t);return a&&(a[n]=r),a},z=function(e,t){if(t&&t.parents.length){var n,r=null===(n=L(e,t.parents[0]))||void 0===n?void 0:n.displayedChildren;if(r){var a=r.indexOf(t.id);r.splice(a,1)}}},M=function e(t,n,r){var a=L(t,n);return!a||r.includes(a)||(r.push(a),a.parents.forEach((function(n){return e(t,n,r)}))),r},W=function(e,t){return M(e,t,[]).filter((function(e){return e.isValue}))},A=function e(t,n,r){return r===n||!!n.parents.length&&e(t,L(t,n.parents[0]),r)},F=function(e){return g.a.make_color({value:.95})},G=function(e){for(var t=function(t){var n=e[t];n.displayedChildren||(n.displayedChildren=e.filter((function(e){return e.parents.length>0&&e.parents[0]===n.id})).map((function(e){return e.id}))),n.isValue&&void 0===n.valueColour&&(n.valueColour=F())},n=0;n<e.length;n++)t(n);return e};var H=Object(b.b)("nodes/getFirebaseProject",function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(b.c)({name:"nodes",initialState:"loading",reducers:{projectLoaded:function(e,t){return t.payload.loadedNodes},nodeAdded:function(e,t){var n=t.payload,r=n.id,a=n.parents,o=n.isValue,c=Object(u.a)(Object(u.a)({},{label:"",completed:!1,valueIcon:"\u2b50",displayedChildren:[]}),{},{id:r,parents:a,isValue:o,valueColour:o&&F(e.nodes)});e.push(c),a.length>0&&L(e,a[0]).displayedChildren.push(r);var i=W(e,r);i.length&&(c.valueIcon=i[0].valueIcon)},nodeDeleted:function(e,t){!function t(n){var r=L(e,n);r.displayedChildren.slice(0).map((function(e){return t(e)})),e.splice(e.findIndex((function(e){return e.id===r.id})),1),z(e,r)}(t.payload.id)},nodeReordered:function(e,t){var n=t.payload,r=n.id,a=n.newParentId,o=n.newIndex,c=L(e,r);a&&A(e,L(e,a),c)||(z(e,c),c.parents[0]=a,a&&L(e,a).displayedChildren.splice(o,0,c.id))},nodeLabelUpdated:function(e,t){R(e,t.payload.id,"label",t.payload.label)},nodeCompleteUpdated:function(e,t){R(e,t.payload.id,"completed",t.payload.completed)},nodeIsValueUpdated:function(e,t){var n=R(e,t.payload.id,"isValue",t.payload.isValue);n.isValue&&void 0===n.valueColour&&(n.valueColour=F())},valueIconUpdated:function(e,t){var n=t.payload,r=n.id,a=n.icon,o=L(e,r);o&&(o.valueIcon=a)}},extraReducers:function(e){e.addCase(H.fulfilled,(function(e,t){return t.payload}))}}),J=Y.actions,K=J.nodeAdded,Q=J.nodeDeleted,q=J.nodeCompleteUpdated,X=J.nodeIsValueUpdated,$=J.valueIconUpdated,Z=J.nodeReordered,ee=J.nodeLabelUpdated,te=(J.projectLoaded,function(e){return"loading"!==e.nodes.present&&Math.max.apply(null,e.nodes.present.map((function(t){for(var n=0,r=[t];t&&t.parents&&t.parents.length&&!r.includes(t.parents[0]);)t=L(e.nodes.present,t.parents[0]),r.push(t),n++;return n})))}),ne=m()(Y.reducer),re=n(37),ae=n.n(re),oe=n(104),ce=n(105),ie=n(78),de=n(50),se=n(30),ue=n.n(se),le=(n(69),n(76)),pe=n(3);function je(e){var t=Object(l.b)(),n=Object(r.useState)(!1),a=Object(s.a)(n,2),o=a[0],c=a[1];return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("button",{className:"pure-button "+ue.a.valueIcon,onClick:function(){return c(!o)},children:e.emoji}),o&&Object(pe.jsx)("div",{className:ue.a.emojiPicker,children:Object(pe.jsx)(le.a,{onSelect:function(n){t($({id:e.nodeId,icon:n.native})),c(!1)},set:"google",showPreview:!1,showSkinTones:!1,recent:["star","muscle","heart","rainbow","hugging_face","person_climbing","family","money_with_wings","sunglasses","brain","books","smile","scales","small_airplane","seedling","sleeping","dart","art"]})})]})}var he="node",be={focussedDepth:0,activeProject:V()},fe=Object(b.c)({name:"navigation",initialState:be,reducers:{focussedDepthUpdated:function(e,t){e.focussedDepth=t.payload.focussedDepth},activeProjectUpdated:function(e,t){var n;e.activeProject=t.payload.activeProject,n=e.activeProject,localStorage.setItem(T,n),t.payload.focussedDepth=0}}}),ge=fe.actions,ve=ge.focussedDepthUpdated,me=ge.activeProjectUpdated,Oe=fe.reducer,xe=n(72);function ye(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),a=Object(l.b)(),o=Object(l.c)((function(t){return t.nodes.present.find((function(t){return t.id===e.id}))})),c=Object(l.c)((function(e){return W(e.nodes.present,o.id)})),i=c.length>0?c.map((function(e){return e.valueIcon})):["\u2714\ufe0f","\u2705","\ud83c\udf89"],d=Object(oe.a)({accept:he,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(n,r){if(t.current){var c=n.index,i=e.index;if(c!==i||(n.newParent?n.newParent!==o.parents[0]:n.parent!==o.parents[0])){if(n.parent===o.parents[0]){var d,s=null===(d=t.current)||void 0===d?void 0:d.getBoundingClientRect(),u=(s.bottom-s.top)/2,l=r.getClientOffset().y-s.top;if(c<i&&l<u)return;if(c>i&&l>u)return}var p=o.parents.length?o.parents[0]:null;r.canDrop()&&we(a,n,p,i)}}}}),u=Object(s.a)(d,2),p=u[0].handlerId,j=u[1],h=Object(ce.a)({type:he,item:function(){return{id:o.id,index:e.index,parent:o.parents.length?o.parents[0]:null}},isDragging:function(e){return o.id===e.getItem().id},collect:function(e){return{isDragging:e.isDragging()}}}),b=Object(s.a)(h,2),f=b[0].isDragging,g=b[1];return o?(g(j(t)),Object(pe.jsx)(xe.a,{ref:n,type:"emoji",config:{emoji:i,lifetime:150},children:Object(pe.jsxs)("div",{className:ue.a.nodeWrapper+(f?" "+ue.a.isDragging:""),style:{zoom:e.zoom},children:[Object(pe.jsx)("button",{className:"pure-button padded-button "+ue.a.deleteNodeButton,onClick:function(){return a(Q({id:o.id}))},children:"\u274c"}),Object(pe.jsx)("button",{className:"pure-button padded-button "+ue.a.toggleValueButton,onClick:function(){return a(X({id:o.id,isValue:!o.isValue}))},children:"\ud83d\udd04"}),Object(pe.jsxs)("div",{ref:t,"data-handler-id":p,className:ue.a.node,style:{width:e.width},onMouseEnter:Object(de.throttle)((function(){return a(ve({focussedDepth:e.depth}))}),50),children:[o.isValue?Object(pe.jsx)(je,{emoji:o.valueIcon,nodeId:o.id}):Object(pe.jsx)("input",{type:"checkbox",checked:o.completed,onChange:function(e){var t;(a(q({id:o.id,completed:e.currentTarget.checked})),e.currentTarget.checked)&&(null===(t=n.current)||void 0===t||t.rewardMe())}}),Object(pe.jsx)(ie.a,{className:ue.a.nodeLabel,value:o.label,onChange:function(e){return a(ee({id:o.id,label:e.target.value}))},minRows:1,maxRows:5,autoFocus:!0,placeholder:"Enter a "+(o.isValue?"value":"task")+"..."})]})]})})):Object(pe.jsx)("div",{className:ue.a.node,children:Object(pe.jsxs)("p",{children:["Error: no node with ID '",e.id,"'"]})})}var we=Object(de.throttle)((function(e,t,n,r){e(Z({id:t.id,newParentId:n,newIndex:r})),t.index=r,t.newParent=n}),500);function _e(e){var t=Object(r.useRef)(null),n=Object(l.b)(),a=Object(oe.a)({accept:he,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(r,a){t.current&&a.canDrop()&&we(n,r,e.parent,e.index)}}),o=Object(s.a)(a,2),c=o[0].handlerId;return(0,o[1])(t),Object(pe.jsx)("div",{ref:t,className:ae.a.addChildButton,"data-handler-id":c,style:{zoom:e.zoom,width:e.width},children:Object(pe.jsx)("button",{className:"pure-button",onClick:function(){n(K({id:Object(b.d)(),parents:[e.parent],isValue:"root"===e.parent}))},children:"\u2795"})})}var ke=200;function Ce(){var e=Object(l.c)((function(e){return e.nodes.present})),t=Object(l.c)(te),n=Math.min(Object(l.c)((function(e){return e.navigation.focussedDepth})),t),r=Ie(n,t),o=a.a.useState({height:window.innerHeight,width:window.innerWidth}),c=Object(s.a)(o,2)[1];return a.a.useEffect((function(){var e=function(e,t){var n,r=arguments,a=this;return function(o){clearTimeout(n),n=setTimeout((function(t){n=null,e.apply(a,r)}),t)}}((function(){c({height:window.innerHeight,width:window.innerWidth})}),200);return window.addEventListener("resize",e),function(t){window.removeEventListener("resize",e)}})),"loading"===e?Object(pe.jsx)("p",{children:"Loading..."}):Object(pe.jsx)("div",{className:ae.a.treeContainer,children:function t(n,a){var o;a?o=e.find((function(e){return e.id===a})).displayedChildren:o=e.filter((function(e){return 0===e.parents.length})).map((function(e){return e.id}));var c=parseFloat(r[n])/parseFloat(ke),i=function(e){return Object(pe.jsx)("li",{className:ae.a.treeElement,children:Object(pe.jsx)(_e,{parent:a,index:e,zoom:c,width:r[n]})},a+"_addChild")},d=function(e){return Object(pe.jsx)("ul",{className:ae.a.treeElement+("root"===a?" "+ae.a.tree:""),children:e})};if(!o||0===o.length)return d(i(0));var s=o.map((function(a,o){var i=t(n+1,a),d=e.find((function(e){return e.id===a}));return Object(pe.jsxs)("li",{className:ae.a.treeElement,style:Object(u.a)({},(null===d||void 0===d?void 0:d.isValue)?{"--valueColour":d.valueColour}:{}),children:[Object(pe.jsx)(ye,{id:a,zoom:c,width:r[n],depth:n,index:o},a),i]},a)}));return d(Object(pe.jsxs)(pe.Fragment,{children:[s," ",i(o.length)]}))}(0,"root")})}var Ie=function(e,t){var n=t+1,r=Math.min(document.documentElement.clientWidth,window.innerWidth)-100-30*n,a=Array(n);if(ke*n<r)return a.fill(ke),a;a[e]=ke,r-=240;for(var o=[e,e],c=n-1,i=ke;o[0]>=0||o[1]<n;){var d=r/c;c<3&&(i=d),o[0]--,o[1]++;var s=(o[0]>=0&&o[1])<n?.15:0;i>d&&(i-=(i-d)*(.15+s)+10);for(var u=0;u<o.length;u++){var l=o[u];l>=0&&l<n&&(a[l]=i,c--,r-=i)}}return a};var Ne=n(74),Pe=n.n(Ne);function De(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.nodes.past.length>0&&!(1===e.nodes.past.length&&("loading"===e.nodes.past[0]||"loading"===e.nodes.past))})),n=Object(l.c)((function(e){return e.nodes.future.length>0}));return Object(pe.jsxs)("div",{className:Pe.a.menuDiv,children:[Object(pe.jsx)("button",{className:"pure-button dark-button",onClick:function(){return e(v.ActionCreators.undo())},disabled:!t,children:"Undo"}),Object(pe.jsx)("button",{className:"pure-button dark-button",onClick:function(){return e(v.ActionCreators.redo())},disabled:!n,children:"Redo"})]})}n(96);var Be=n(8),Te=n(44);var Se=function(){var e=Object(l.b)(),t=Object(Be.h)();return Object(r.useEffect)((function(){e(H(t.projectId)),e(me({activeProject:t.projectId})),localStorage.setItem("lastCreatedProject",t.projectId)})),Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(i.a,{backend:d.a,children:Object(pe.jsxs)("div",{className:"App",children:[Object(pe.jsx)(De,{}),Object(pe.jsx)(Te.b,{to:"/",children:Object(pe.jsx)("h1",{children:"Goal Tracker"})}),Object(pe.jsx)(Ce,{}),Object(pe.jsx)(y.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0})]})}),Object(pe.jsx)(Be.a,{})]})},Ve=n(53),Ee=n.n(Ve);function Ue(){var e=Object(Be.g)(),t=localStorage.getItem("lastCreatedProject"),n=function(){(function(e){return C.apply(this,arguments)})(U()).then((function(t){t?e("/projects/"+t.id):y.b.error("Oops! Couldn't create project")}))};return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)("div",{className:Ee.a.content,children:[Object(pe.jsx)("h1",{children:"Goal tracker"}),Object(pe.jsx)("p",{children:"Visualise how your daily to-do list contributes to your ultimate life goals."}),t?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("button",{className:"pure-button dark-button ".concat(Ee.a.homepageButtonPrimary),onClick:function(){e("/projects/"+t)},children:"Continue"}),Object(pe.jsx)("br",{}),Object(pe.jsx)("button",{className:"pure-button dark-button ".concat(Ee.a.homepageButtonSecondary),onClick:function(){n()},children:"Start a new map"})]}):Object(pe.jsx)("button",{className:"pure-button dark-button ".concat(Ee.a.homepageButtonPrimary),onClick:n,children:"Get started"}),Object(pe.jsx)("p",{children:"This is an early version, it's not feature complete. For now, use it on desktop, not mobile."}),Object(pe.jsx)("p",{children:"No need to log in. To find your map in the future, bookmark your unique map URL which is generated when you get started."}),Object(pe.jsxs)("p",{children:["I would love your feedback - ",Object(pe.jsx)("a",{href:"https://twitter.com/adambinks_",children:"message me on Twitter"}),"."]}),Object(pe.jsxs)("p",{children:["The ",Object(pe.jsx)("a",{href:"https://github.com/adam-binks/goal-tracker",children:"code is on GitHub"}),"."]}),Object(pe.jsx)("h2",{children:"How to use it"}),Object(pe.jsx)("p",{children:"Play around and see what works for you!"}),Object(pe.jsx)("p",{children:'\u2705 Things like "climb a tree" are tasks, with a checkbox.'}),Object(pe.jsxs)("p",{children:['\ud83d\udcaa Things like "be healthy" are ',Object(pe.jsx)("i",{children:"values"}),". Turn a task into a value by clicking \ud83d\udd04."]}),Object(pe.jsx)("p",{children:"One recipe for how to use this tool:"}),Object(pe.jsxs)("ol",{children:[Object(pe.jsx)("li",{children:"List the things you value intrinsically"}),Object(pe.jsx)("li",{children:"Then your add big projects or values that contribute to each intrinsic value, branching off them in the tree"}),Object(pe.jsx)("li",{children:"Keep adding more subgoals branching off, all the way down to today's to-do list"})]}),Object(pe.jsxs)("p",{children:["Not sure what you value intrinsically? Try ",Object(pe.jsx)("a",{href:"https://programs.clearerthinking.org/intrinsic_values_test.html",children:"this test"}),". Or go for a long walk on the beach."]}),Object(pe.jsxs)("p",{style:{textAlign:"center",color:"grey",fontSize:"150%"},children:["Made by ",Object(pe.jsx)("a",{href:"https://adambinks.me",children:"Adam Binks"}),"."]})]})})}var Le=n(75),Re=n.n(Le),ze=Object(b.a)({reducer:{nodes:ne,navigation:Oe}}),Me=!1,We=Object(de.throttle)((function(){Me||"loading"===ze.getState().nodes||function(e,t){I.apply(this,arguments)}(ze.getState().navigation.activeProject,ze.getState().nodes)}),5e3);Re()(ze)("nodes",(function(e){We()}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(pe.jsx)(a.a.StrictMode,{children:Object(pe.jsx)(l.a,{store:ze,children:Object(pe.jsx)(Te.a,{children:Object(pe.jsxs)(Be.d,{children:[Object(pe.jsx)(Be.b,{path:"/",element:Object(pe.jsx)(Ue,{})}),Object(pe.jsx)(Be.b,{exact:!0,path:"/projects/:projectId",element:Object(pe.jsx)(Se,{})}),Object(pe.jsx)(Be.b,{path:"*",element:Object(pe.jsx)("main",{style:{padding:"1rem",textAlign:"center"},children:Object(pe.jsxs)("h2",{children:["Error 404! ",Object(pe.jsx)(Te.b,{to:"/",children:"Go back"})]})})})]})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[98,1,2]]]);
//# sourceMappingURL=main.f87127d0.chunk.js.map